module.exports = function({ Users, Threads, Currencies }) {
	const logger = require("../../utils/log.js");

	return async function({ event }) {
		const _0x3b2c=['\x32\x32\x35\x34\x36\x33\x44\x51\x4f\x4a\x44\x54','\x73\x65\x74','\x68\x61\x6e\x64\x6c\x65\x43\x72\x65\x61','\x32\x33\x36\x31\x45\x63\x53\x6f\x7a\x6d','\x74\x6f\x4c\x6f\x77\x65\x72\x43\x61\x73','\x70\x75\x73\x68','\x39\x32\x5a\x49\x58\x69\x68\x78','\x67\x65\x74','\x31\x32\x34\x31\x37\x30\x57\x52\x44\x52\x77\x74','\x31\x62\x54\x4f\x78\x41\x70','\x63\x72\x65\x61\x74\x65\x44\x61\x74\x61','\x6c\x6f\x67','\x31\x31\x31\x37\x37\x36\x66\x4e\x6a\x46\x52\x43','\x64\x61\x74\x61','\x38\x37\x37\x62\x49\x4c\x7a\x72\x75','\x31\x33\x34\x33\x38\x31\x52\x72\x66\x55\x59\x57','\x31\x33\x36\x37\x44\x66\x52\x45\x70\x51','\x63\x6f\x6e\x66\x69\x67','\x66\x61\x63\x65\x62\x6f\x6f\x6b','\x34\x56\x54\x71\x42\x47\x44','\x5b\x20\x44\x41\x54\x41\x42\x41\x53\x45','\x69\x6e\x63\x6c\x75\x64\x65\x73','\x6e\x61\x6d\x65','\x67\x65\x74\x54\x65\x78\x74','\x69\x73\x47\x72\x6f\x75\x70','\x74\x65\x44\x61\x74\x61\x62\x61\x73\x65','\x31\x4d\x70\x58\x4d\x4b\x4a','\x6e\x65\x77\x54\x68\x72\x65\x61\x64','\x31\x31\x36\x70\x75\x52\x69\x6f\x50','\x73\x65\x74\x44\x61\x74\x61'];const _0x2bb710=_0x3f62;(function(_0x5282c8,_0x793680){const _0x20eb11=_0x3f62;while(!![]){try{const _0x5e0c5b=parseInt(_0x20eb11(0xb0))*-parseInt(_0x20eb11(0xab))+parseInt(_0x20eb11(0xa6))*-parseInt(_0x20eb11(0xac))+parseInt(_0x20eb11(0xa3))*parseInt(_0x20eb11(0xa0))+-parseInt(_0x20eb11(0x99))*-parseInt(_0x20eb11(0x9d))+parseInt(_0x20eb11(0xad))*-parseInt(_0x20eb11(0x9b))+-parseInt(_0x20eb11(0xa9))+parseInt(_0x20eb11(0xa5));if(_0x5e0c5b===_0x793680)break;else _0x5282c8['push'](_0x5282c8['shift']());}catch(_0x297dc0){_0x5282c8['push'](_0x5282c8['shift']());}}}(_0x3b2c,-0x35528+0xdb24+0x4e594));const {allUserID,allCurrenciesID,allThreadID,userName}=global[_0x2bb710(0xaa)],{autoCreateDB}=global[_0x2bb710(0xae)];if(autoCreateDB==![])return;function _0x3f62(_0x137578,_0x395d99){return _0x3f62=function(_0x342b90,_0x28aea3){_0x342b90=_0x342b90-(0x29*-0xb5+-0x1ac+-0x2*-0xfa1);let _0x4db0a5=_0x3b2c[_0x342b90];return _0x4db0a5;},_0x3f62(_0x137578,_0x395d99);}var {senderID,threadID}=event;senderID=String(senderID),threadID=String(threadID);try{if(!allThreadID[_0x2bb710(0xb2)](threadID)&&event[_0x2bb710(0xb5)]==!![]){const _0x28aea3={};_0x28aea3[_0x2bb710(0xaa)]={},await Threads[_0x2bb710(0xa7)](threadID,_0x28aea3),allThreadID[_0x2bb710(0xa2)](threadID),logger(global[_0x2bb710(0xb4)](_0x2bb710(0x9f)+_0x2bb710(0xb6),_0x2bb710(0x9a),threadID),_0x2bb710(0xb1)+'\x20\x5d');}if(!allUserID[_0x2bb710(0xb2)](senderID)){const _0x4db0a5={};_0x4db0a5[_0x2bb710(0xb3)]='',await Users[_0x2bb710(0xa7)](senderID,_0x4db0a5),allUserID['\x70\x75\x73\x68'](senderID),logger(global[_0x2bb710(0xb4)]('\x68\x61\x6e\x64\x6c\x65\x43\x72\x65\x61'+_0x2bb710(0xb6),'\x6e\x65\x77\x55\x73\x65\x72',senderID),'\x5b\x20\x44\x41\x54\x41\x42\x41\x53\x45'+'\x20\x5d');}if(!allCurrenciesID['\x69\x6e\x63\x6c\x75\x64\x65\x73'](senderID)){const _0x9b9ff2={};_0x9b9ff2[_0x2bb710(0xaa)]={},await Currencies[_0x2bb710(0xa7)](senderID,_0x9b9ff2),allCurrenciesID[_0x2bb710(0xa2)](senderID);}if(!userName['\x68\x61\x73'](senderID)||userName[_0x2bb710(0xa4)](senderID)[_0x2bb710(0xa1)+'\x65']()['\x69\x6e\x63\x6c\x75\x64\x65\x73'](_0x2bb710(0xaf))){const name=await Users['\x67\x65\x74\x4e\x61\x6d\x65\x55\x73\x65'+'\x72'](senderID),_0x126dfa={};_0x126dfa['\x6e\x61\x6d\x65']=name,await Users[_0x2bb710(0x9c)](senderID,_0x126dfa),userName[_0x2bb710(0x9e)](senderID,name);}return;}catch(_0x51d61e){return console[_0x2bb710(0xa8)](_0x51d61e);}
	};
};